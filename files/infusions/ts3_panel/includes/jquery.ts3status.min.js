/**
 * jQuery Teamspeak 3 Status
 *
 * @author Christian Hanne <support@aureola.codes>
 * @license MIT
 */
(function(c){var b=function(a,b){this.element=c(a);this.options=c.extend({},d,b);this.request()};b.prototype.request=function(){this.element.addClass("ts3-updating");c.ajax({url:this.getUrl(),type:"GET",success:this.response.bind(this),error:this.error.bind(this)})};b.prototype.error=function(a){this.response({status:"error",result:{code:a.status,message:a.statusText}})};b.prototype.response=function(a){this.element.removeClass("ts3-updating");this.element.addClass("ts3-"+a.status);"success"===a.status?
(this.render(null,a.result),this.options.onError.call(this.element.get(0),a)):(this.render(a.result),this.options.onSuccess.call(this.element.get(0),a));0<this.options.rate&&setTimeout(this.request.bind(this),this.options.rate)};b.prototype.render=function(a,b){var c;c=a?this.options.templateError.replace("{{error}}",a.message):this.options.templateSuccess.replace("{{server}}",b.name).replace("{{country}}",b.country).replace("{{users}}",b.users).replace("{{slots}}",b.slots).replace("{{url}}",this.getConnectUrl());
this.element.html(c)};b.prototype.getUrl=function(){return this.options.api+"/"+this.options.host+"/"+this.options.port};b.prototype.getConnectUrl=function(){return"ts3server://"+this.options.host+"/?port="+this.options.port};var d={api:"https://api.planetteamspeak.com/serverstatus",host:"localhost",port:"80",rate:1E4,onSuccess:function(){},onError:function(){},templateError:'<div class="ts3-error">{{error}}</div>',templateSuccess:'<div class="ts3-name">{{server}}({{country}})</div><div class="ts3-slots">Slots: {{users}}/{{slots}}</div><a href="{{url}}">Connect</a>'};
c.fn.ts3status=function(a){a=a||{};return this.each(function(){new b(this,a)})};c.fn.ts3status.defaults=d})(jQuery);
